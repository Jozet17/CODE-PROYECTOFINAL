<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel Usuario - Pool Nene</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='estilos2.css') }}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="usuario-body">

  <div class="usuario-container">
    
    <!-- Encabezado: Foto + Bienvenida -->
    <div class="fila perfil-usuario">
      <div class="columna perfil-img">
        {% set foto_usuario = usuario.foto if usuario.foto else 'usuario.png' %}
        <img src="{{ url_for('static', filename='imagenes/fotos_usuarios/' + foto_usuario) }}"
            alt="Foto del usuario"
            class="foto-circular">


        <label class="editar-foto" for="foto">Añadir / Editar foto</label>
      </div>
      <div class="columna bienvenida-texto">
        <h2>Bienvenido, {{ usuario.nombre }}</h2>
      </div>
    </div>

    <!-- Formulario -->
    <form method="POST" action="/actualizar_perfil" enctype="multipart/form-data">
      <!-- Campo para subir imagen -->
      <input type="file" name="foto" id="foto" accept="image/*" style="display: none;">

      <div class="fila seccion-central">
        <!-- Columna izquierda -->
        <div class="columna datos-personales">
          <h3>Datos personales</h3>

          <div class="campo-editable">
            <label>Nombre:</label>
            <div class="input-edit">
              <input type="text" name="nombre" value="{{ usuario.nombre }}" id="nombre">
              <a href="#" onclick="habilitar('nombre')">Editar</a>
            </div>
          </div>

          <div class="campo-editable">
            <label>Correo:</label>
            <div class="input-edit">
              <input type="email" name="correo" value="{{ usuario.correo }}" readonly>
            </div>
          </div>

          <div class="campo-editable">
            <label>Fecha de nacimiento:</label>
            <div class="input-edit">
              <input type="date" name="fecha_nacimiento" value="{{ usuario.fecha_nacimiento or '' }}" id="fecha">
              <a href="#" onclick="habilitar('fecha')">Editar</a>
            </div>
          </div>

          <div class="campo-editable">
            <label>Teléfono:</label>
            <div class="input-edit">
              <input type="text" name="telefono" value="{{ usuario.telefono or '' }}" id="telefono">
              <a href="#" onclick="habilitar('telefono')">Editar</a>
            </div>
          </div>

          <div class="campo-editable">
            <label>Dirección:</label>
            <div class="input-edit">
              <input type="text" name="direccion" value="{{ usuario.direccion or '' }}" id="direccion">
              <a href="#" onclick="habilitar('direccion')">Editar</a>
            </div>
          </div>

          <div class="botones-usuario mt-4">
            <button type="submit" class="btn btn-success">Guardar cambios</button>
            <a href="{{ url_for('logout') }}" class="btn btn-danger">Cerrar sesión</a>
          </div>
        </div>

        <!-- Columna derecha: Accesos -->
        <div class="columna accesos-directos">
          <h3>Accesos rápidos</h3>
          <div class="fila">
            <div class="columna">
              <a href="{{ url_for('index') }}" class="btn btn-outline-light w-100 mb-3">Inicio</a>
              <a href="/reservar" class="btn btn-outline-light w-100 mb-3">Reservar</a>
            </div>
            <div class="columna">
              <a href="{{ url_for('ver_eventos') }}" class="btn btn-outline-light w-100 mb-3">Eventos</a>
              <a href="{{ url_for('ver_servicios') }}" class="btn btn-outline-light w-100 mb-3">Servicios</a>
            </div>
          </div>
        </div>
      </div>
    </form>

  </div>

  <script>
    function habilitar(id) {
      document.getElementById(id).removeAttribute('readonly');
      document.getElementById(id).focus();
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
